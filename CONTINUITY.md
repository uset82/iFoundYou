# Continuity Ledger

- Goal (incl. success criteria): Build a Loopt-like test web app (Netlify deploy) with OpenAI App SDK integration.
- Constraints/Assumptions: ASCII preferred; repo includes web app in `web/`; no tests yet; Windows path cannot include `http://` so `http://CONTINUITY.md` refers to `CONTINUITY.md`; user expects minimal questions and prefers the agent to run steps.
- Key decisions: Proceed with default stack (Vite React, MapLibre, Supabase PostGIS, Netlify Functions); project name is "IfoundYou"; create Supabase schema file before wiring RLS.
- State: Google OAuth added; email sign-up validates password length; Grok/X-style UI live with logo; adding community emergency alerts for disasters (water/food/medical/lost); user hit SQL error by pasting JS into SQL editor; user attempting Google provider setup in Supabase; Supabase returns "missing OAuth secret" for Google; Google console error due to callback URL placed in Authorized JavaScript origins; Supabase SQL editor cannot alter `public.spatial_ref_sys` (ownership).
- Done: Read Loopt research files; delivered plan in `docs/plan.md`; scaffolded Vite app; converted to React; added MapLibre map and geolocation; updated map style/markers/controls; added Netlify config + health + location-update + nearby + discover + alerts + cleanup functions; added `.env.example`; added Supabase schema + RLS + triggers; added Supabase client + auth UI; wired location writes to Supabase with alerts call; added friend requests + pending lists; added friend markers + nearby list + notification prompts; added discoverable toggle + discovery list; added alerts inbox UI; added Google OAuth sign-in button and password length validation; updated `docs/supabase-setup.md`; added `supabase/.env.example`; added `docs/openai-tools.json` + `docs/openai-integration.md`; added `docs/deploy.md`; updated `AGENTS.md`; updated `netlify.toml` build command; set local `web/.env` and root `.env` with Supabase URL + anon key; made schema enum creation idempotent; fixed MapLibre null checks; `npm run build` succeeded; redesigned UI to Grok/X-inspired dark layout in `web/src/App.tsx` and `web/src/style.css`; added logo lockup in sidebar brand; added community alert schema, RLS, Netlify function, and UI; added README with setup + deploy steps.
- Now: Apply new SQL (`supabase/schema.sql`, `supabase/rls.sql`) in Supabase (not JS), validate community alerts, and guide user through Google auth + deployment steps.
- Next: Enable Google provider in Supabase and validate auth flow; push to GitHub, then set Netlify env vars and deploy.
- Open questions (UNCONFIRMED if needed): Clarify what "upload into ChatGPT app" means (GPT, App SDK app, or share link); obtain Supabase service role key if you want scheduled cleanup on Netlify later.
- Working set (files/ids/commands): `AGENTS.md`, `CONTINUITY.md`, `README.md`, `docs/plan.md`, `docs/supabase-setup.md`, `docs/openai-tools.json`, `docs/openai-integration.md`, `docs/deploy.md`, `netlify.toml`, `.gitignore`, `netlify/functions/health.js`, `netlify/functions/location-update.js`, `netlify/functions/nearby.js`, `netlify/functions/discover.js`, `netlify/functions/alerts.js`, `netlify/functions/community-alerts.js`, `netlify/functions/cleanup.js`, `supabase/schema.sql`, `supabase/rls.sql`, `supabase/triggers.sql`, `web/src/App.tsx`, `web/src/style.css`.
